matrix:
  include:
    - language: python
      python: 3.6

      before_script:
        - cd api-server/

      install:
        - pip install -r requirements.txt

      script:
        - pytest

      env:
        METAWAHL_CONF=prod.conf.py
        ADMIN_KEY=asdfyooo

    - language: node_js
      node_js:
        - "node"

      before_script:
        - cd client/

      sudo: false
      dist: trusty

      addons:
        chrome: stable

      cache:
        directories:
          - $HOME/.npm

      env:
        global:
          # See https://git.io/vdao3 for details.
          - JOBS=1

      before_install:
        - npm config set spin false